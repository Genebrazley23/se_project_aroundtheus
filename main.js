!function(){"use strict";var e=class{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this.formEle=t,this._inputEles=[...this.formEle.querySelectorAll(this._inputSelector)],this._submitButton=this.formEle.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this.formEle.querySelector(`#${e.id}-error`);t&&(t.textContent=e.validationMessage,t.classList.add(this._errorClass),e.classList.add(this._inputErrorClass))}_hideInputError(e){const t=this.formEle.querySelector(`#${e.id}-error`);t&&(t.textContent="",t.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_toggleButtonState(){this._inputEles.some((e=>!e.validity.valid))?this.disableSubmit():this.enableSubmit()}_setEventListeners(){this._toggleButtonState(),this._inputEles.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this.formEle.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}disableSubmit(){this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass)}enableSubmit(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}},t=class{constructor(e,t,s,i,r){let{name:n,link:o,_id:a,isLiked:l}=e;this._isLiked=l,this._handleCardLikeClick=r,this._name=n,this._link=o,this.id=a,this._cardSelector=t,this._cardImageClickHandler=s,this._handleDelete=i}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._isLiked=!this._isLiked,this.updateLikeState(),this._handleCardLikeClick(this.id,this._isLiked)}));const e=this._cardElement.querySelector(".delete__button");e.addEventListener("click",(()=>{const t=e.closest(".card");this._handleDelete(this,t)})),this._cardElement.querySelector(".card__image").addEventListener("click",this._cardImageClickHandler)}_bindInfo(){const e=this._cardElement.querySelector(".card__name"),t=this._cardElement.querySelector(".card__image");t.src=this._link,t.alt=this._name,e.textContent=this._name,this.updateLikeState()}updateLikeState(){const e="card__like-button_active";this._isLiked?this._likeButton.classList.add(e):this._likeButton.classList.remove(e)}getView(){const e=document.querySelector(this._cardSelector);return this._cardElement=e.content.cloneNode(!0),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._setEventListeners(),this._bindInfo(),this._cardElement}};class s{constructor(e){this._popElement=document.querySelector(e),this._popupCloseButton=this._popElement.querySelector(".modal__close"),this._handleModalClose=this._handleModalClose.bind(this),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popElement.classList.add("modal_open"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popElement.classList.remove("modal_open"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleModalClose(){this.close()}setEventListeners(){this._popElement.addEventListener("click",this._handleModalClose,!1),this._popupCloseButton.addEventListener("click",this._handleModalClose),this._popElement.querySelector(".modal__container").addEventListener("click",(e=>{e.stopPropagation()}))}}class i extends s{constructor(e,t){super(e),this._popupForm=this._popElement.querySelector(".modal__form"),this._inputList=this._popupForm.querySelectorAll(".modal__input"),this._handleFormSubmit=t,this._getInputValues=this._getInputValues.bind(this),this._submitButton=this._popupForm.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}_clearInputs(){this._popupForm.reset()}renderLoading(e){console.log("fmer",e,this._submitButtonText),e?(this._submitButton.textContent="Saving...",this._submitButton.disabled=!0):(this._submitButton.textContent=this._submitButtonText,this._submitButton.disabled=!1)}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this.renderLoading(!0),this._handleFormSubmit(t).then((()=>{this._clearInputs(),this.close()})).catch((e=>{console.error(e)})).finally((()=>{this.renderLoading(!1)}))}))}setSubmitHandler(e){this._handleFormSubmit=e}}const r={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},n=document.querySelector(".profile__edit-button"),o=(document.querySelector(".profile__title"),document.querySelector("#profile__edit-modal")),a=(document.querySelector(".profile__description"),document.querySelector("#profile-title-input")),l=document.querySelector("#profile-description-input"),d=(document.querySelector("#image__popup"),document.forms.profile__form),c=(o.querySelector(".modal__close"),document.querySelector(".profile__add-button")),u=(document.querySelector(".cards__list"),document.forms["place__create-form"]),_=(document.querySelector("#place__create-modal").querySelector(".modal__close"),document.querySelector("#place__name-input"),document.querySelector("#place__image-link-input"),document.querySelector(".profile__avatar")),h=document.forms["avatar__update-form"],m=(document.querySelector("#avatar__image-link-input"),new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._containerSelector=t,this._container=document.querySelector(this._containerSelector)}renderItems(){this._items.forEach((e=>{const t=this._renderer(e);this.addItem(t)}))}addItem(e){this._container.prepend(e)}setItems(e){this._items=e,this.renderItems()}}({renderer:k},".cards__list")),p=new class extends s{constructor(e){super(e),this._imageModalZoom=this._popElement.querySelector(".modal__zoom"),this._imageModalName=this._popElement.querySelector(".modal__name")}open(e){this._imageModalName.textContent=e.name,this._imageModalZoom.src=e.link,this._imageModalZoom.alt=e.name,super.open()}}("#image__popup");p.setEventListeners();const f=new class{constructor(e){let{profileTitleSelector:t,profileDescriptionSelector:s,avatarSelector:i}=e;this._profileTitle=document.querySelector(t),this._profileDescription=document.querySelector(s),this._avatar=document.querySelector(i)}getUserInfo(){return{title:this._profileTitle.textContent,description:this._profileDescription.textContent}}setUserInfo(e){let{title:t,description:s,avatar:i}=e;this._profileTitle.textContent=t,this._profileDescription.textContent=s,i&&(this._avatar.style.backgroundImage=`url(${i})`)}}({profileTitleSelector:".profile__title",profileDescriptionSelector:".profile__description",avatarSelector:".profile__avatar"}),b=new i("#profile__edit-modal",(function(e){return q.updateUserInfo({name:e.title,about:e.description}).then((()=>{f.setUserInfo(e),b.close()}))}));b.setEventListeners();const S=new i("#place__create-modal",(function(e){const t={name:e.title,link:e.link};return L.disableSubmit(),q.createCard(t).then((()=>{const e=k(t);m.addItem(e),u.reset(),S.close()}))}));S.setEventListeners();const E=new i("#avatar__update-modal",(function(e){let{link:t}=e;return q.updateAvatar({avatar:t}).then((e=>{f.setUserInfo({title:e.name,description:e.about,avatar:e.avatar}),E.close()})).catch((e=>console.err(`Error updating avatar: ${e}`)))}));E.setEventListeners(),_.addEventListener("click",(()=>{E.open()})),new e(r,h).enableValidation();const v=new class extends s{constructor(e,t){super(e),this._handleSubmit=t,this._button=this._popElement.querySelector(".modal__button")}setSubmitAction(e){this._handleSubmit=e}setEventListeners(){super.setEventListeners(),this._button.addEventListener("click",(e=>{e.preventDefault(),this._handleSubmit()}))}}("#place__delete-modal");v.setEventListeners();const C=new e(r,d),L=new e(r,u);function y(e,t){t?q.likeCard(e):q.unlikeCard(e)}function k(e){return new t(e,"#card__template",(function(){!function(e,t){const s={name:t,link:e};p.open(s)}(e.link,e.name)}),g,y).getView()}function g(e,t){v.open(),v.setSubmitAction((()=>{q.deleteCard(e.id).then((()=>{t.remove(),v.close()})).catch((e=>{console.err(`Error deleting card: ${e}`)}))}))}C.enableValidation(),L.enableValidation(),n.addEventListener("click",(function(){const e=f.getUserInfo();a.value=e.title,l.value=e.description,b.open()})),c.addEventListener("click",(function(){S.open()}));const q=new class{constructor(e){let{headers:t,baseUrl:s}=e;this._defaultHeaders=t,this._baseUrl=s}getInitialCards(){return this.handleresponse(fetch(this._baseUrl+"/cards",{headers:this._defaultHeaders}))}getUserInfo(){return this.handleresponse(fetch(this._baseUrl+"/users/me",{headers:this._defaultHeaders}))}updateUserInfo(e){return this.handleresponse(fetch(this._baseUrl+"/users/me",{method:"PATCH",headers:this._defaultHeaders,body:JSON.stringify(e)}))}createCard(e){return this.handleresponse(fetch(this._baseUrl+"/cards",{method:"POST",headers:this._defaultHeaders,body:JSON.stringify(e)}))}deleteCard(e){return this.handleresponse(fetch(this._baseUrl+"/cards/"+e,{method:"DELETE",headers:this._defaultHeaders}))}likeCard(e){return this.handleresponse(fetch(this._baseUrl+"/cards/"+e+"/likes",{method:"PUT",headers:this._defaultHeaders}))}unlikeCard(e){return this.handleresponse(fetch(this._baseUrl+"/cards/"+e+"/likes",{method:"DELETE",headers:this._defaultHeaders}))}updateAvatar(e){return this.handleresponse(fetch(this._baseUrl+"/users/me/avatar",{method:"PATCH",headers:this._defaultHeaders,body:JSON.stringify(e)}))}handleresponse(e){return e.then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>{throw console.error(e),e}))}loadAll(){return Promise.all(this.getInitialCards(),this.getUserInfo())}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"93b64164-7992-45be-bad2-1f9098f0ec32","Content-Type":"application/json"}});q.getUserInfo().then((e=>{f.setUserInfo({title:e.name,description:e.about,avatar:e.avatar})})),q.getInitialCards().then((e=>{m.setItems(e)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNsRCxHTDZHa0IsQ0FDbEJxQyxRQUFTLGtEQUNURCxRQUFTLENBQ1BvQixjQUFlLHVDQUNmLGVBQWdCLHNCQUlwQi9DLEVBQUlULGNBQWMzQyxNQUFNOEUsSUFDdEIxQyxFQUFTVSxZQUFZLENBQ25CRixNQUFPa0MsRUFBUzFJLEtBQ2hCeUcsWUFBYWlDLEVBQVN4QixNQUN0Qk4sT0FBUThCLEVBQVM5QixRQUNqQixJQUdKSSxFQUFJK0Isa0JBQWtCbkYsTUFBTW9HLElBQzFCbkYsRUFBWVksU0FBU3VFLEVBQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL0FwaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlKSB7XG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gY29uZmlnLmZvcm1TZWxlY3RvcjtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xuXG4gICAgdGhpcy5mb3JtRWxlID0gZm9ybUVsZTtcbiAgICB0aGlzLl9pbnB1dEVsZXMgPSBbLi4udGhpcy5mb3JtRWxlLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuZm9ybUVsZS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZSkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZSA9IHRoaXMuZm9ybUVsZS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZS5pZH0tZXJyb3JgKTtcbiAgICBpZiAoZXJyb3JNZXNzYWdlRWxlKSB7XG4gICAgICBlcnJvck1lc3NhZ2VFbGUudGV4dENvbnRlbnQgPSBpbnB1dEVsZS52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICAgIGVycm9yTWVzc2FnZUVsZS5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgICAgaW5wdXRFbGUuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIH1cbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZSkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZSA9IHRoaXMuZm9ybUVsZS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZS5pZH0tZXJyb3JgKTtcbiAgICBpZiAoZXJyb3JNZXNzYWdlRWxlKSB7XG4gICAgICBlcnJvck1lc3NhZ2VFbGUudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgZXJyb3JNZXNzYWdlRWxlLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgICBpbnB1dEVsZS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZSkge1xuICAgIGlmICghaW5wdXRFbGUudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGUpO1xuICAgIH1cbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBjb25zdCBmb3VuZEludmFsaWQgPSB0aGlzLl9pbnB1dEVsZXMuc29tZShcbiAgICAgIChpbnB1dEVsZSkgPT4gIWlucHV0RWxlLnZhbGlkaXR5LnZhbGlkXG4gICAgKTtcblxuICAgIGlmIChmb3VuZEludmFsaWQpIHtcbiAgICAgIHRoaXMuZGlzYWJsZVN1Ym1pdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVuYWJsZVN1Ym1pdCgpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0RWxlcy5mb3JFYWNoKChpbnB1dEVsZSkgPT4ge1xuICAgICAgaW5wdXRFbGUuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlKTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLmZvcm1FbGUuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGRpc2FibGVTdWJtaXQoKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgfVxuXG4gIGVuYWJsZVN1Ym1pdCgpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHsgbmFtZSwgbGluaywgX2lkLCBpc0xpa2VkIH0sXG4gICAgY2FyZFNlbGVjdG9yLFxuICAgIGNhcmRJbWFnZUNsaWNrSGFuZGxlcixcbiAgICBoYW5kbGVEZWxldGUsXG4gICAgY2FyZExpa2VDbGlja1xuICApIHtcbiAgICB0aGlzLl9pc0xpa2VkID0gaXNMaWtlZDtcbiAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZUNsaWNrID0gY2FyZExpa2VDbGljaztcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICB0aGlzLmlkID0gX2lkO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9jYXJkSW1hZ2VDbGlja0hhbmRsZXIgPSBjYXJkSW1hZ2VDbGlja0hhbmRsZXI7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlID0gaGFuZGxlRGVsZXRlO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2lzTGlrZWQgPSAhdGhpcy5faXNMaWtlZDtcbiAgICAgIHRoaXMudXBkYXRlTGlrZVN0YXRlKCk7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZUNsaWNrKHRoaXMuaWQsIHRoaXMuX2lzTGlrZWQpO1xuICAgIH0pO1xuICAgIGNvbnN0IHJlbW92ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGVsZXRlX19idXR0b25cIik7XG4gICAgcmVtb3ZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBjYXJkSXRlbSA9IHJlbW92ZUJ1dHRvbi5jbG9zZXN0KFwiLmNhcmRcIik7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGUodGhpcywgY2FyZEl0ZW0pO1xuICAgIH0pO1xuXG4gICAgY29uc3QgY2FyZEltYWdlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fY2FyZEltYWdlQ2xpY2tIYW5kbGVyKTtcbiAgfVxuICBfYmluZEluZm8oKSB7XG4gICAgY29uc3QgY2FyZFRpdGxlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbmFtZVwiKTtcbiAgICBjb25zdCBjYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICBjYXJkSW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XG4gICAgY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIGNhcmRUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMudXBkYXRlTGlrZVN0YXRlKCk7XG4gIH1cblxuICB1cGRhdGVMaWtlU3RhdGUoKSB7XG4gICAgY29uc3QgYWN0aXZlQ2xhc3MgPSBcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiO1xuICAgIGlmICh0aGlzLl9pc0xpa2VkKSB7XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoYWN0aXZlQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoYWN0aXZlQ2xhc3MpO1xuICAgIH1cbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fYmluZEluZm8oKTtcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24gPSB0aGlzLl9wb3BFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuICAgIHRoaXMuX2hhbmRsZU1vZGFsQ2xvc2UgPSB0aGlzLl9oYW5kbGVNb2RhbENsb3NlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3BFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5cIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZU1vZGFsQ2xvc2UoKSB7XG4gICAgdGhpcy5jbG9zZSgpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlTW9kYWxDbG9zZSwgZmFsc2UpO1xuICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZU1vZGFsQ2xvc2UpO1xuICAgIHRoaXMuX3BvcEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jb250YWluZXJcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fZ2V0SW5wdXRWYWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBkYXRhID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBkYXRhW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBfY2xlYXJJbnB1dHMoKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gIH1cblxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xuICAgIGNvbnNvbGUubG9nKFwiZm1lclwiLCBpc0xvYWRpbmcsIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQpO1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b25UZXh0O1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCBkYXRhID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgICAgIHRoaXMucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoZGF0YSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHRoaXMuX2NsZWFySW5wdXRzKCk7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIH0pXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICB0aGlzLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldFN1Ym1pdEhhbmRsZXIoaGFuZGxlcikge1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVyO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG4iLCJpbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsIHZhbGlkYXRpb25Db25maWcgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi91dGlscy9BcGkuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanNcIjtcblxuLyogRUxFTUVOVFMgKi9cblxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX2VkaXQtbW9kYWxcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxuKTtcblxuY29uc3Qgb3BlblBvcHVwQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZV9fcG9wdXBcIik7XG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcInByb2ZpbGVfX2Zvcm1cIl07XG5jb25zdCBwcm9maWxlTW9kYWxDbG9zZSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG5jb25zdCBwcm9maWxlQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuXG5jb25zdCBjYXJkTGlzdEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuXG5jb25zdCBwbGFjZUNyZWF0ZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcInBsYWNlX19jcmVhdGUtZm9ybVwiXTtcbmNvbnN0IHBsYWNlQ3JlYXRlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BsYWNlX19jcmVhdGUtbW9kYWxcIik7XG5jb25zdCBwbGFjZUNyZWF0ZUNsb3NlID0gcGxhY2VDcmVhdGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcblxuY29uc3QgcGxhY2VOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BsYWNlX19uYW1lLWlucHV0XCIpO1xuY29uc3QgcGxhY2VJbWFnZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwbGFjZV9faW1hZ2UtbGluay1pbnB1dFwiKTtcblxuY29uc3QgYXZhdGFyRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyXCIpO1xuY29uc3QgdXBkYXRlQXZhdGFyRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiYXZhdGFyX191cGRhdGUtZm9ybVwiXTtcbmNvbnN0IGF2YXRhcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXJfX2ltYWdlLWxpbmstaW5wdXRcIik7XG5cbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oeyByZW5kZXJlcjogY3JlYXRlQ2FyZCB9LCBcIi5jYXJkc19fbGlzdFwiKTtcblxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjaW1hZ2VfX3BvcHVwXCIpO1xucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBwcm9maWxlVGl0bGVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG4gIGF2YXRhclNlbGVjdG9yOiBcIi5wcm9maWxlX19hdmF0YXJcIixcbn0pO1xuXG5jb25zdCBwcm9maWxlRWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3Byb2ZpbGVfX2VkaXQtbW9kYWxcIixcbiAgaGFuZGxlRWRpdEZvcm1TdWJtaXRcbik7XG5cbnByb2ZpbGVFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcGxhY2VDcmVhdGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNwbGFjZV9fY3JlYXRlLW1vZGFsXCIsXG4gIGhhbmRsZVBsYWNlQ3JlYXRlRm9ybVxuKTtcblxucGxhY2VDcmVhdGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBzZXRBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNhdmF0YXJfX3VwZGF0ZS1tb2RhbFwiLFxuICBoYW5kbGVBdmF0YXJVcGRhdGVcbik7XG5cbnNldEF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmF2YXRhckVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgc2V0QXZhdGFyUG9wdXAub3BlbigpO1xufSk7XG5cbi8vIGZpbmQgYXZhdGFyIGltYWdlIGVsZW1lbnQgYW5kIGFkZCBhIGNsaWNrIGhhbmRsZXIgdG8gb3BlbiB0aGUgdXBkYXRlIGZvcm0uXG4vL1xuY29uc3QgdXBkYXRlQXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0aW9uQ29uZmlnLFxuICB1cGRhdGVBdmF0YXJGb3JtXG4pO1xudXBkYXRlQXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHBvcHVwV2l0aENvbmZpcm0gPSBuZXcgUG9wdXBXaXRoQ29uZmlybShcIiNwbGFjZV9fZGVsZXRlLW1vZGFsXCIpO1xucG9wdXBXaXRoQ29uZmlybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwcm9maWxlRWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvbkNvbmZpZyxcbiAgcHJvZmlsZUVkaXRGb3JtXG4pO1xuXG5jb25zdCBwbGFjZUNyZWF0ZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvbkNvbmZpZyxcbiAgcGxhY2VDcmVhdGVGb3JtXG4pO1xucHJvZmlsZUVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbnBsYWNlQ3JlYXRlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbi8qIExJU1RFTkVSUyAqL1xucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLnRpdGxlO1xuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHVzZXJEYXRhLmRlc2NyaXB0aW9uO1xuICBwcm9maWxlRWRpdFBvcHVwLm9wZW4oKTtcbn0pO1xuXG5mdW5jdGlvbiBoYW5kbGVFZGl0Rm9ybVN1Ym1pdChkYXRhKSB7XG4gIHJldHVybiBhcGlcbiAgICAudXBkYXRlVXNlckluZm8oeyBuYW1lOiBkYXRhLnRpdGxlLCBhYm91dDogZGF0YS5kZXNjcmlwdGlvbiB9KVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICAgICAgcHJvZmlsZUVkaXRQb3B1cC5jbG9zZSgpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVQbGFjZUNyZWF0ZUZvcm0oZGF0YSkge1xuICBjb25zdCBjYXJkRGF0YSA9IHtcbiAgICBuYW1lOiBkYXRhLnRpdGxlLFxuICAgIGxpbms6IGRhdGEubGluayxcbiAgfTtcbiAgcGxhY2VDcmVhdGVGb3JtVmFsaWRhdG9yLmRpc2FibGVTdWJtaXQoKTtcbiAgcmV0dXJuIGFwaS5jcmVhdGVDYXJkKGNhcmREYXRhKS50aGVuKCgpID0+IHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xuICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgIHBsYWNlQ3JlYXRlRm9ybS5yZXNldCgpO1xuICAgIHBsYWNlQ3JlYXRlUG9wdXAuY2xvc2UoKTtcbiAgfSk7XG59XG5cbnByb2ZpbGVBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgcGxhY2VDcmVhdGVQb3B1cC5vcGVuKCk7XG59KTtcblxuLyogRnVuY3Rpb25zICovXG5cbmZ1bmN0aW9uIGhhbmRsZUF2YXRhclVwZGF0ZSh7IGxpbmsgfSkge1xuICByZXR1cm4gYXBpXG4gICAgLnVwZGF0ZUF2YXRhcih7IGF2YXRhcjogbGluayB9KVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICAgICAgdGl0bGU6IHJlcy5uYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogcmVzLmFib3V0LFxuICAgICAgICBhdmF0YXI6IHJlcy5hdmF0YXIsXG4gICAgICB9KTtcbiAgICAgIHNldEF2YXRhclBvcHVwLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnIoYEVycm9yIHVwZGF0aW5nIGF2YXRhcjogJHtlcnJ9YCkpO1xufVxuXG5mdW5jdGlvbiBjYXJkTGlrZUNsaWNrKGNhcmRJZCwgaXNMaWtlZCkge1xuICBpZiAoaXNMaWtlZCkge1xuICAgIGFwaS5saWtlQ2FyZChjYXJkSWQpO1xuICB9IGVsc2Uge1xuICAgIGFwaS51bmxpa2VDYXJkKGNhcmRJZCk7XG4gIH1cbn1cblxuLy8gRGVmaW5lIHRoZSBjcmVhdGVDYXJkIGZ1bmN0aW9uXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XG4gIC8vIFNlbGVjdCB0aGUgdGVtcGxhdGUgZWxlbWVudCBhbmQgY2xvbmUgaXRzIGNvbnRlbnRzXG4gIGNvbnN0IGNhcmRJbmZvID0gbmV3IENhcmQoXG4gICAgY2FyZERhdGEsXG4gICAgXCIjY2FyZF9fdGVtcGxhdGVcIixcbiAgICBmdW5jdGlvbiAoKSB7XG4gICAgICBvcGVuWm9vbVBpY3R1cmUoY2FyZERhdGEubGluaywgY2FyZERhdGEubmFtZSk7XG4gICAgfSxcbiAgICBoYW5kbGVEZWxldGVDYXJkLFxuICAgIGNhcmRMaWtlQ2xpY2tcbiAgKTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkSW5mby5nZXRWaWV3KCk7XG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNhcmQoY2FyZCwgY2FyZEVsZW1lbnQpIHtcbiAgLy8gT3BlbiB0aGUgY29uZmlybSBwb3B1cFxuICBwb3B1cFdpdGhDb25maXJtLm9wZW4oKTtcblxuICAvLyBTZXQgdGhlIHN1Ym1pdCBhY3Rpb24gZm9yIHRoZSBjb25maXJtYXRpb25cbiAgcG9wdXBXaXRoQ29uZmlybS5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xuICAgIGFwaVxuICAgICAgLmRlbGV0ZUNhcmQoY2FyZC5pZClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgLy8gRGVsZXRlIHRoZSBjYXJkIGZyb20gdGhlIERPTVxuICAgICAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTsgLy8gQXNzdW1pbmcgJ2NhcmQnIGlzIHRoZSBET00gZWxlbWVudFxuICAgICAgICAvLyBDbG9zZSB0aGUgcG9wdXBcbiAgICAgICAgcG9wdXBXaXRoQ29uZmlybS5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyKGBFcnJvciBkZWxldGluZyBjYXJkOiAke2Vycn1gKTtcbiAgICAgICAgLy8gT3B0aW9uYWxseSwgYWRkIGZlZWRiYWNrIHRvIHRoZSB1c2VyIGhlcmVcbiAgICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gb3Blblpvb21QaWN0dXJlKHNyYywgYWx0KSB7XG4gIGNvbnN0IGRhdGEgPSB7IG5hbWU6IGFsdCwgbGluazogc3JjIH07XG5cbiAgcG9wdXBXaXRoSW1hZ2Uub3BlbihkYXRhKTtcbn1cblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiOTNiNjQxNjQtNzk5Mi00NWJlLWJhZDItMWY5MDk4ZjBlYzMyXCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuYXBpLmdldFVzZXJJbmZvKCkudGhlbigodXNlckRhdGEpID0+IHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgIHRpdGxlOiB1c2VyRGF0YS5uYW1lLFxuICAgIGRlc2NyaXB0aW9uOiB1c2VyRGF0YS5hYm91dCxcbiAgICBhdmF0YXI6IHVzZXJEYXRhLmF2YXRhcixcbiAgfSk7XG59KTtcblxuYXBpLmdldEluaXRpYWxDYXJkcygpLnRoZW4oKGNhcmRzKSA9PiB7XG4gIGNhcmRTZWN0aW9uLnNldEl0ZW1zKGNhcmRzKTtcbn0pO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lclNlbGVjdG9yID0gY29udGFpbmVyU2VsZWN0b3I7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgIFxuICAgICAgY29uc3Qgbm9kZSA9IHRoaXMuX3JlbmRlcmVyKGVsZW1lbnQpO1xuICAgICAgdGhpcy5hZGRJdGVtKG5vZGUpO1xuICAgIH0pO1xuICB9XG4gIGFkZEl0ZW0obm9kZSkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKG5vZGUpO1xuICB9XG4gIHNldEl0ZW1zKGl0ZW1zKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLnJlbmRlckl0ZW1zKCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IobW9kYWxTZWxlY3Rvcikge1xuICAgIHN1cGVyKG1vZGFsU2VsZWN0b3IpO1xuICAgIHRoaXMuX2ltYWdlTW9kYWxab29tID0gdGhpcy5fcG9wRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX196b29tXCIpO1xuICAgIHRoaXMuX2ltYWdlTW9kYWxOYW1lID0gdGhpcy5fcG9wRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19uYW1lXCIpO1xuICB9XG5cbiAgb3BlbihkYXRhKSB7XG4gICAgdGhpcy5faW1hZ2VNb2RhbE5hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5faW1hZ2VNb2RhbFpvb20uc3JjID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2ltYWdlTW9kYWxab29tLmFsdCA9IGRhdGEubmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIHByb2ZpbGVUaXRsZVNlbGVjdG9yLFxuICAgIHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yLFxuICAgIGF2YXRhclNlbGVjdG9yLFxuICB9KSB7XG4gICAgdGhpcy5fcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlVGl0bGVTZWxlY3Rvcik7XG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIGNvbnN0IHVzZXJEYXRhID0ge1xuICAgICAgdGl0bGU6IHRoaXMuX3Byb2ZpbGVUaXRsZS50ZXh0Q29udGVudCxcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQsXG4gICAgfTtcbiAgICByZXR1cm4gdXNlckRhdGE7XG4gIH1cbiAgc2V0VXNlckluZm8oeyB0aXRsZSwgZGVzY3JpcHRpb24sIGF2YXRhciB9KSB7XG4gICAgdGhpcy5fcHJvZmlsZVRpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XG4gICAgaWYgKGF2YXRhcikge1xuICAgICAgdGhpcy5fYXZhdGFyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHthdmF0YXJ9KWA7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fcG9wRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XG4gIH1cblxuICBzZXRTdWJtaXRBY3Rpb24oZm4pIHtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBmbjtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHsgaGVhZGVycywgYmFzZVVybCB9KSB7XG4gICAgdGhpcy5fZGVmYXVsdEhlYWRlcnMgPSBoZWFkZXJzO1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiB0aGlzLmhhbmRsZXJlc3BvbnNlKFxuICAgICAgZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL2NhcmRzXCIsIHsgaGVhZGVyczogdGhpcy5fZGVmYXVsdEhlYWRlcnMgfSlcbiAgICApO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFuZGxlcmVzcG9uc2UoXG4gICAgICBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvdXNlcnMvbWVcIiwgeyBoZWFkZXJzOiB0aGlzLl9kZWZhdWx0SGVhZGVycyB9KVxuICAgICk7XG4gIH1cblxuICB1cGRhdGVVc2VySW5mbyh1c2VySW5mbykge1xuICAgIHJldHVybiB0aGlzLmhhbmRsZXJlc3BvbnNlKFxuICAgICAgZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL3VzZXJzL21lXCIsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2RlZmF1bHRIZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh1c2VySW5mbyksXG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBjcmVhdGVDYXJkKGNyZWF0ZUNhcmRJbmZvKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFuZGxlcmVzcG9uc2UoXG4gICAgICBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvY2FyZHNcIiwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9kZWZhdWx0SGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoY3JlYXRlQ2FyZEluZm8pLFxuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gdGhpcy5oYW5kbGVyZXNwb25zZShcbiAgICAgIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBcIi9jYXJkcy9cIiArIGNhcmRJZCwge1xuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2RlZmF1bHRIZWFkZXJzLFxuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgbGlrZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFuZGxlcmVzcG9uc2UoXG4gICAgICBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvY2FyZHMvXCIgKyBjYXJkSWQgKyBcIi9saWtlc1wiLCB7XG4gICAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgICAgaGVhZGVyczogdGhpcy5fZGVmYXVsdEhlYWRlcnMsXG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICB1bmxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiB0aGlzLmhhbmRsZXJlc3BvbnNlKFxuICAgICAgZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL2NhcmRzL1wiICsgY2FyZElkICsgXCIvbGlrZXNcIiwge1xuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2RlZmF1bHRIZWFkZXJzLFxuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgdXBkYXRlQXZhdGFyKGF2YXRhcikge1xuICAgIHJldHVybiB0aGlzLmhhbmRsZXJlc3BvbnNlKFxuICAgICAgZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL3VzZXJzL21lL2F2YXRhclwiLCB7XG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9kZWZhdWx0SGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYXZhdGFyKSxcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIGhhbmRsZXJlc3BvbnNlKHJlcXVlc3QpIHtcbiAgICByZXR1cm4gcmVxdWVzdFxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfSk7XG4gIH1cblxuICBsb2FkQWxsKCkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbCh0aGlzLmdldEluaXRpYWxDYXJkcygpLCB0aGlzLmdldFVzZXJJbmZvKCkpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJjb25maWciLCJmb3JtRWxlIiwidGhpcyIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5wdXRFbGVzIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJxdWVyeVNlbGVjdG9yIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGUiLCJlcnJvck1lc3NhZ2VFbGUiLCJpZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsInNvbWUiLCJkaXNhYmxlU3VibWl0IiwiZW5hYmxlU3VibWl0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiZGlzYWJsZWQiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiY2FyZEltYWdlQ2xpY2tIYW5kbGVyIiwiaGFuZGxlRGVsZXRlIiwiY2FyZExpa2VDbGljayIsIm5hbWUiLCJsaW5rIiwiX2lkIiwiaXNMaWtlZCIsIl9pc0xpa2VkIiwiX2hhbmRsZUNhcmRMaWtlQ2xpY2siLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9jYXJkSW1hZ2VDbGlja0hhbmRsZXIiLCJfaGFuZGxlRGVsZXRlIiwiX2xpa2VCdXR0b24iLCJ1cGRhdGVMaWtlU3RhdGUiLCJyZW1vdmVCdXR0b24iLCJfY2FyZEVsZW1lbnQiLCJjYXJkSXRlbSIsImNsb3Nlc3QiLCJfYmluZEluZm8iLCJjYXJkVGl0bGVFbGVtZW50IiwiY2FyZEltYWdlRWxlbWVudCIsInNyYyIsImFsdCIsImFjdGl2ZUNsYXNzIiwiZ2V0VmlldyIsImNhcmRUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3BFbGVtZW50IiwiX3BvcHVwQ2xvc2VCdXR0b24iLCJfaGFuZGxlTW9kYWxDbG9zZSIsImJpbmQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJzdG9wUHJvcGFnYXRpb24iLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9pbnB1dExpc3QiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsIl9zdWJtaXRCdXR0b25UZXh0IiwiZGF0YSIsImlucHV0IiwidmFsdWUiLCJfY2xlYXJJbnB1dHMiLCJyZXNldCIsInJlbmRlckxvYWRpbmciLCJpc0xvYWRpbmciLCJjb25zb2xlIiwibG9nIiwiZXZlbnQiLCJ0aGVuIiwiY2F0Y2giLCJlcnJvciIsImZpbmFsbHkiLCJzZXRTdWJtaXRIYW5kbGVyIiwiaGFuZGxlciIsInZhbGlkYXRpb25Db25maWciLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicHJvZmlsZUVkaXRGb3JtIiwiZm9ybXMiLCJwcm9maWxlQWRkQnV0dG9uIiwicGxhY2VDcmVhdGVGb3JtIiwiYXZhdGFyRWRpdEJ1dHRvbiIsInVwZGF0ZUF2YXRhckZvcm0iLCJjYXJkU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyU2VsZWN0b3IiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJfaXRlbXMiLCJlbGVtZW50Iiwibm9kZSIsImFkZEl0ZW0iLCJwcmVwZW5kIiwic2V0SXRlbXMiLCJpdGVtcyIsImNyZWF0ZUNhcmQiLCJwb3B1cFdpdGhJbWFnZSIsIm1vZGFsU2VsZWN0b3IiLCJfaW1hZ2VNb2RhbFpvb20iLCJfaW1hZ2VNb2RhbE5hbWUiLCJ1c2VySW5mbyIsInByb2ZpbGVUaXRsZVNlbGVjdG9yIiwicHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9wcm9maWxlVGl0bGUiLCJfcHJvZmlsZURlc2NyaXB0aW9uIiwiX2F2YXRhciIsImdldFVzZXJJbmZvIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInNldFVzZXJJbmZvIiwiX3JlZjIiLCJhdmF0YXIiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsInByb2ZpbGVFZGl0UG9wdXAiLCJhcGkiLCJ1cGRhdGVVc2VySW5mbyIsImFib3V0IiwicGxhY2VDcmVhdGVQb3B1cCIsImNhcmREYXRhIiwicGxhY2VDcmVhdGVGb3JtVmFsaWRhdG9yIiwiY2FyZEVsZW1lbnQiLCJzZXRBdmF0YXJQb3B1cCIsInVwZGF0ZUF2YXRhciIsInJlcyIsImVyciIsIkZvcm1WYWxpZGF0b3IiLCJwb3B1cFdpdGhDb25maXJtIiwiX2hhbmRsZVN1Ym1pdCIsIl9idXR0b24iLCJzZXRTdWJtaXRBY3Rpb24iLCJmbiIsInByb2ZpbGVFZGl0Rm9ybVZhbGlkYXRvciIsImNhcmRJZCIsImxpa2VDYXJkIiwidW5saWtlQ2FyZCIsIkNhcmQiLCJvcGVuWm9vbVBpY3R1cmUiLCJoYW5kbGVEZWxldGVDYXJkIiwiY2FyZCIsImRlbGV0ZUNhcmQiLCJ1c2VyRGF0YSIsImhlYWRlcnMiLCJiYXNlVXJsIiwiX2RlZmF1bHRIZWFkZXJzIiwiX2Jhc2VVcmwiLCJnZXRJbml0aWFsQ2FyZHMiLCJoYW5kbGVyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjcmVhdGVDYXJkSW5mbyIsInJlcXVlc3QiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwibG9hZEFsbCIsImFsbCIsImF1dGhvcml6YXRpb24iLCJjYXJkcyJdLCJzb3VyY2VSb290IjoiIn0=